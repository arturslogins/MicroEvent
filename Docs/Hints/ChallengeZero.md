# Hints for Challenge Zero

In the following we will describe in detail the call stack through the whole system that is performed when information from StuffMS is required.

1. In the [created hook](https://vuejs.org/v2/guide/instance.html#Lifecycle-Diagram) the [UI Component](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/TheDashboard/src/components/Header.vue#L55) try to fetch the StuffMS message value from the backend by invoking a specific action (fetchStuffSample)
1. The [action](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/TheDashboard/src/store/modules/mod_statistics.js#L24) invoke the [Backend API](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/TheDashboard/src/api/businessData.js#L10)
1. The [API Gateway](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/swagger/swagger.yaml#L42), the component that exposes all APIs to the outer world, handles this specific request from TheDashboard web app
1. The specific [Controller](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/controllers/stuff.js#L18) for that API does the following:
    * it [routes](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/helpers/async.js#L15) the request through a [default pipeline](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/helpers/defaultPipe.js#L50) where among other operations, it generates an unique [Operation ID](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/helpers/defaultPipe.js#L9)
    * It then invoke the [BusinessLogic callback](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/helpers/defaultPipe.js#L58) which in this case triggers the [dispatch of the event](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/controllers/stuff.js#L22) signaling somebody is interested in the Stuff
    * The OperationID is then returned to TheDashboard web app as an [HTTP Header value](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/helpers/async.js#L24) in order to implement [asynchronous behaviour over REST](http://restcookbook.com/Resources/asynchroneous-operations/)
1. The Dashboard then tries again and again to [poll for status](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/TheDashboard/src/utilities/httpHandler.js#L13) and it [keeps getting a 202](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/api/helpers/async.js#L47)
1. StuffMS process react on the event by potentially changing its state (in practice this is not currently happening) and [produces the expected event](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/StuffMS/src/utilities/rabbitmq.js#L69) advertising the work being done.
1. The message generated by StuffMS is [received by the API Gateway and stored safely](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/APIGateway/utilities/rabbitmq.js#L68) on our MongoDB frontend cache.
1. The next request from TheDashboard will contain the needed information and it will store the message value in the Vuex store (through [committing a mutation](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/TheDashboard/src/store/modules/mod_statistics.js#L52))
1. The [UI Component](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/TheDashboard/src/components/Header.vue#L48) refers to the Vuex specific getter to fetch the value of the message from the store, which means that Vue will automatically update the view as soon as the value in the store changes.
1. The [UI Component](https://github.com/DanskeBank/MicroEvent/blob/724edef9f3cbbe2cfa9bd654f219c73d611dcddb/TheDashboard/src/components/Header.vue#L10) show the value of the message in the template when the latter is rendered
